{% extends 'main/content.html' %}
{% load static %}

{% block title %}
2.4. Параметры строки запроса
{% endblock %}
    {% block head %}Параметры строки запроса{% endblock %}
{% block content %}


    
    <p>От параметров, которые передаются через адрес URL, следует отличать параметры, которые передаются через строку запроса. 
    Например, в запросе <span class="ii">http://localhost/index/3/Tom/</span> два последних сегмента <code>3/Tom/</code> представляют 
    параметры URL. А в запросе <span class="ii">http://localhost/index?id=3&amp;name=Tom</span> те же самые значения 3 и Tom представляют параметры 
    строки запроса.</p>
    <p>Параметры строки запроса указывается после вопросительного знака ?. Каждый параметр предсталяет пару ключ-значение, напимер, в <code>id=3</code> : 
    id - название или ключ параметра, а 3 - его значение. Параметры в строке запроса отделяются друг от друга знаком амперсанда.</p>
    <p>Для получения параметров из строки запроса применяется метод <strong>request.GET.get()</strong>.</p>
    <p>Например, определим в файле <strong>views.py</strong> следующие функции:</p>
    <nav class="navbar navbar-light" style="background-color: #e3f2fd;">
    <div><div id="highlighter_498890" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help"></a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py keyword">from</code> <code class="py plain">django.http </code><code class="py keyword">import</code> <code class="py plain">HttpResponse</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="py keyword">def</code> <code class="py plain">products(request, productid):</code></div><div class="line number4 index3 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">category </code><code class="py keyword">=</code> <code class="py plain">request.GET.get(</code><code class="py string">"cat"</code><code class="py plain">, "")</code></div><div class="line number5 index4 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">output </code><code class="py keyword">=</code> <code class="py string">"&lt;h2&gt;Product № {0}&nbsp; Category: {1}&lt;/h2&gt;"</code><code class="py plain">.</code><code class="py functions">format</code><code class="py plain">(productid, category)</code></div><div class="line number6 index5 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">return</code> <code class="py plain">HttpResponse(output)</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="py keyword">def</code> <code class="py plain">users(request):</code></div><div class="line number9 index8 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py functions">id</code> <code class="py keyword">=</code> <code class="py plain">request.GET.get(</code><code class="py string">"id"</code><code class="py plain">, </code><code class="py value">1</code><code class="py plain">)</code></div><div class="line number10 index9 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">name </code><code class="py keyword">=</code> <code class="py plain">request.GET.get(</code><code class="py string">"name"</code><code class="py plain">, </code><code class="py string">"Tom"</code><code class="py plain">)</code></div><div class="line number11 index10 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">output </code><code class="py keyword">=</code> <code class="py string">"&lt;h2&gt;User&lt;/h2&gt;&lt;h3&gt;id: {0}&nbsp; name: {1}&lt;/h3&gt;"</code><code class="py plain">.</code><code class="py functions">format</code><code class="py plain">(</code><code class="py functions">id</code><code class="py plain">, name)</code></div><div class="line number12 index11 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">return</code> <code class="py plain">HttpResponse(output)</code></div></div></td></tr></tbody></table></div></div>
    </nav>
    <p>Функция products принимает обычный параметра productid, который будет передаваться через URL. И также из строки запроса извлекается значение параметра 
    <code>cat</code>: <code>request.GET.get("cat", "")</code> - первый аргумент функции - это название параметра строки запроса, значение которого надо извлечь, 
    а второй аргумент - значение по умолчанию, если вдруг в строке запроса не оказалось подобного параметра.</p>
    <p>В функции users из строки запроса извлекаются значения параметров id и name.</p>
    <p>В файле <strong>urls.py</strong> определим следующие маршруты:</p>
    <nav class="navbar navbar-light" style="background-color: #e3f2fd;">
    <div><div id="highlighter_502940" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help"></a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py keyword">from</code> <code class="py plain">django.urls </code><code class="py keyword">import</code> <code class="py plain">path</code></div><div class="line number2 index1 alt1"><code class="py keyword">from</code> <code class="py plain">firstapp </code><code class="py keyword">import</code> <code class="py plain">views</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="py plain">urlpatterns </code><code class="py keyword">=</code> <code class="py plain">[</code></div><div class="line number5 index4 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">path(</code><code class="py string">'products/&lt;int:productid&gt;/'</code><code class="py plain">, views.products),</code></div><div class="line number6 index5 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">path(</code><code class="py string">'users/'</code><code class="py plain">, views.users),</code></div><div class="line number7 index6 alt2"><code class="py plain">]</code></div></div></td></tr></tbody></table></div></div>
    </nav>
    <p>При обращении к приложению по адресу <span class="ii">http://127.0.0.1:8000/products/3/?cat=phones</span>, число 3 будет представлять параметр URL будет переходить в 
    параметр productid, а <code>cat="phones"</code> будет представлять параметр cat строки запроса.</p>
    <img class="displayed" src="{% static "images/2/3.9.png" %}" alt="site logo" >
    <p>А при обращении по адресу <span class="ii">http://127.0.0.1:8000/users/?name=Tom&amp;id=5</span> значения Tom и 5 будет представлять соответственно параметры name и id:</p>
    <img class="displayed" src="{% static "images/2/3.10.png" %}" alt="site logo" >
{% endblock %}
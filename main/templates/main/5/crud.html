{% extends 'main/content.html' %}
{% load static %}
{% block title %}
5.3. CRUD. Операции с моделями
{% endblock %}
    {% block head %}CRUD. Операции с моделями{% endblock %}
{% block content %}

    
    <p>При создании моделей они наследуют поведение от класса <span class="b">django.db.models.Model</span>, который предоставляет ряд базовых операций с данными.</p>
    <p>Рассмотрим ряд операций на примере модели <span class="b">Person</span>:</p>
    <nav class="navbar navbar-light" style="background-color: #e3f2fd;">
    <div><div id="highlighter_85627" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help"></a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py keyword">from</code> <code class="py plain">django.db </code><code class="py keyword">import</code> <code class="py plain">models</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="py keyword">class</code> <code class="py plain">Person(models.Model):</code></div><div class="line number4 index3 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">name </code><code class="py keyword">=</code> <code class="py plain">models.CharField(max_length</code><code class="py keyword">=</code><code class="py value">20</code><code class="py plain">)</code></div><div class="line number5 index4 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">age </code><code class="py keyword">=</code> <code class="py plain">models.IntegerField()</code></div></div></td></tr></tbody></table></div></div>
    </nav>
    <h3>Добавление данных</h3>
    <h4>create</h4>
    <p>Для добавления данных применяется метод <span class="b">create()</span>:</p>
    <nav class="navbar navbar-light" style="background-color: #e3f2fd;">
    <div><div id="highlighter_689494" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help"></a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py plain">tom </code><code class="py keyword">=</code> <code class="py plain">Person.objects.create(name</code><code class="py keyword">=</code><code class="py string">"Tom"</code><code class="py plain">, age</code><code class="py keyword">=</code><code class="py value">23</code><code class="py plain">)</code></div></div></td></tr></tbody></table></div></div>
    </nav>
    <p>Если добавление пройдет успешно, то объект будет иметь id, который можно получить через <code>tom.id</code>.</p>
    <h4>save</h4>
    <p>Однако в своей сути метод <code>create()</code> использует другой метод - <span class="b">save()</span>, который мы также можем использовать отдельно 
    для добавления объекта:</p>
    
    <div><div id="highlighter_948696" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help"></a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py plain">tom </code><code class="py keyword">=</code> <code class="py plain">Person(name</code><code class="py keyword">=</code><code class="py string">"Tom"</code><code class="py plain">, age</code><code class="py keyword">=</code><code class="py value">23</code><code class="py plain">)</code></div><div class="line number2 index1 alt1"><code class="py plain">tom.save()</code></div></div></td></tr></tbody></table></div></div>
    
    <p>После успешного добавления также можно получить идентификатор добавленной записи с помощью <code>tom.id</code>.</p>
    <h3>Получение из бд</h3>
    <h4>Получение одного объекта</h4>
    <p>Метод <span class="b">get()</span> возвращает один объект по определенному условию, которое передается в качестве параметра:</p>
    <nav class="navbar navbar-light" style="background-color: #e3f2fd;">
    <div><div id="highlighter_576285" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help"></a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py plain">tom </code><code class="py keyword">=</code> <code class="py plain">Person.objects.get(name</code><code class="py keyword">=</code><code class="py string">"Tom"</code><code class="py plain">)&nbsp;&nbsp;&nbsp; </code><code class="py comments"># получаем запись, где name="Tom"</code></div><div class="line number2 index1 alt1"><code class="py plain">bob </code><code class="py keyword">=</code> <code class="py plain">Person.objects.get(age</code><code class="py keyword">=</code><code class="py value">23</code><code class="py plain">)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="py comments"># получаем запись, где age=23</code></div><div class="line number3 index2 alt2"><code class="py plain">tim </code><code class="py keyword">=</code> <code class="py plain">Person.objects.get(name</code><code class="py keyword">=</code><code class="py string">"Tim"</code><code class="py plain">, age</code><code class="py keyword">=</code><code class="py value">23</code><code class="py plain">)&nbsp;&nbsp;&nbsp; </code><code class="py comments"># запись, где name="Tim" и age=23</code></div></div></td></tr></tbody></table></div></div>
    </nav>
    <p>При использовании этого метода надо учитывать, что он предназначен для выборки таких объектов, которые имеются в единичном числе в базе данных. Если 
    в таблице не окажется подобного объекта, то мы получим ошибку <code>имя_модели.DoesNotExist</code>. Если же в таблице будет несколько объектов, которые соответствуют 
    условию, то будет сгенерированно исключение <code>MultipleObjectsReturned</code>. Поэтому следует применять данный метод с осторожностью.</p>
    <p>Метод <span class="b">get_or_create()</span> возвращает объект, а если его нет в бд, то добавляет в бд новый объект.</p>
    <nav class="navbar navbar-light" style="background-color: #e3f2fd;">
    <div><div id="highlighter_928110" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help"></a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py plain">bob, created </code><code class="py keyword">=</code> <code class="py plain">Person.objects.get_or_create(name</code><code class="py keyword">=</code><code class="py string">"Bob"</code><code class="py plain">, age</code><code class="py keyword">=</code><code class="py value">24</code><code class="py plain">)</code></div><div class="line number2 index1 alt1"><code class="py functions">print</code><code class="py plain">(bob.name)</code></div><div class="line number3 index2 alt2"><code class="py functions">print</code><code class="py plain">(bob.age)</code></div></div></td></tr></tbody></table></div></div>
    </nav>
    <p>Метод возвращает добавленный объект (в данном случае переменная bob) и булевое значение (created), которое хранит True, если добавление прошло успешно.</p>
    <h4>all()</h4>
    <p>Если необходимо получить все имеющиеся объекты, то применяется метод <span class="b">all()</span>:</p>
    <nav class="navbar navbar-light" style="background-color: #e3f2fd;">
    <div><div id="highlighter_503968" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help"></a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py plain">people </code><code class="py keyword">=</code> <code class="py plain">Person.objects.</code><code class="py functions">all</code><code class="py plain">()</code></div></div></td></tr></tbody></table></div></div>
    </nav>
    <h4>filter()</h4>
    <p>Если надо получить все объекты, которые соответствуют определенному критерию, то применяется метод <span class="b">filter()</span>, 
    который в качестве параметра принимает критерий выборки:</p>
    <nav class="navbar navbar-light" style="background-color: #e3f2fd;">
    <div><div id="highlighter_468502" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help"></a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py plain">people </code><code class="py keyword">=</code> <code class="py plain">Person.objects.</code><code class="py functions">filter</code><code class="py plain">(age</code><code class="py keyword">=</code><code class="py value">23</code><code class="py plain">)</code></div><div class="line number2 index1 alt1"><code class="py comments"># использование нескольких криетриев</code></div><div class="line number3 index2 alt2"><code class="py plain">people2 </code><code class="py keyword">=</code> <code class="py plain">Person.objects.</code><code class="py functions">filter</code><code class="py plain">(name</code><code class="py keyword">=</code><code class="py string">"Tom"</code><code class="py plain">, age</code><code class="py keyword">=</code><code class="py value">23</code><code class="py plain">)</code></div></div></td></tr></tbody></table></div></div>
   </nav>
    <h4>exclude()</h4>
    <p>Метод <span class="b">exclude()</span> позволяют исключить из выборки записи, которые соответвуют переданному в качестве параметра критерию:</p>
    <nav class="navbar navbar-light" style="background-color: #e3f2fd;">
    <div><div id="highlighter_226579" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help"></a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py comments"># исключаем пользователей, у которых age=23</code></div><div class="line number2 index1 alt1"><code class="py plain">people </code><code class="py keyword">=</code> <code class="py plain">Person.objects.exclude(age</code><code class="py keyword">=</code><code class="py value">23</code><code class="py plain">)</code></div></div></td></tr></tbody></table></div></div>
    </nav>
    <p>Можно комбинировать два выше рассмотренных метода:</p>
    <nav class="navbar navbar-light" style="background-color: #e3f2fd;">
    <div><div id="highlighter_383965" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help"></a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py comments"># выбираем всех пользователей, у которых name="Tom" кроме тех, у которых age=23</code></div><div class="line number2 index1 alt1"><code class="py plain">people </code><code class="py keyword">=</code> <code class="py plain">Person.objects.</code><code class="py functions">filter</code><code class="py plain">(name</code><code class="py keyword">=</code><code class="py string">"Tom"</code><code class="py plain">).exclude(age</code><code class="py keyword">=</code><code class="py value">23</code><code class="py plain">)</code></div></div></td></tr></tbody></table></div></div>
    </nav>
    <h4>in_bulk()</h4>
    <p>Метод <span class="b">in_bulk()</span> является более эффективным способом для чтения большого количества записей. Он возвращает словарь, 
    то есть объект dict, тогда как методы <code>all()</code>, <code>filter()</code> и <code>exclude()</code> возвращают объект <span class="b">QuerySet</span>:</p>
    <nav class="navbar navbar-light" style="background-color: #e3f2fd;">
    <div><div id="highlighter_698535" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help"></a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py comments"># получаем все объекты</code></div><div class="line number2 index1 alt1"><code class="py plain">people </code><code class="py keyword">=</code> <code class="py plain">Person.objects.in_bulk()</code></div><div class="line number3 index2 alt2"><code class="py keyword">for</code> <code class="py functions">id</code> <code class="py keyword">in</code> <code class="py plain">people:</code></div><div class="line number4 index3 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py functions">print</code><code class="py plain">(people[</code><code class="py functions">id</code><code class="py plain">].name)</code></div><div class="line number5 index4 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py functions">print</code><code class="py plain">(people[</code><code class="py functions">id</code><code class="py plain">].age)</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="py comments"># получаем объекты с id=1 и id=3</code></div><div class="line number8 index7 alt1"><code class="py plain">people2 </code><code class="py keyword">=</code> <code class="py plain">Person.objects.in_bulk([</code><code class="py value">1</code><code class="py plain">,</code><code class="py value">3</code><code class="py plain">])</code></div><div class="line number9 index8 alt2"><code class="py keyword">for</code> <code class="py functions">id</code> <code class="py keyword">in</code> <code class="py plain">people2:</code></div><div class="line number10 index9 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py functions">print</code><code class="py plain">(people2[</code><code class="py functions">id</code><code class="py plain">].name)</code></div><div class="line number11 index10 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py functions">print</code><code class="py plain">(people2[</code><code class="py functions">id</code><code class="py plain">].age)</code></div></div></td></tr></tbody></table></div></div>
    </nav>
    <p>Метод in_bulk возвращает словарь, где ключи представляют id объектов, а значения по этим ключам - собственно эти объекты, то есть в данном случае объекты Person.</p>
    <h3>Обновление</h3>
    <h4>save()</h4>
    <p>Для обновления объекта также применяется метод <span class="b">save()</span>:</p>
    <nav class="navbar navbar-light" style="background-color: #e3f2fd;">
    <div><div id="highlighter_622372" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help"></a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py plain">bob </code><code class="py keyword">=</code> <code class="py plain">Person.objects.get(</code><code class="py functions">id</code><code class="py keyword">=</code><code class="py value">2</code><code class="py plain">)</code></div><div class="line number2 index1 alt1"><code class="py plain">bob.name </code><code class="py keyword">=</code> <code class="py string">"Bob"</code></div><div class="line number3 index2 alt2"><code class="py plain">bob.save()</code></div></div></td></tr></tbody></table></div></div>
    </nav>
    <p>В этом случае Django полностью обновляет объект, все его свойства, даже если мы их не изменяли. Чтобы указать, что нам надо обновить только 
    определенные поля, следует использовать параметр <code>update_fields</code>:</p>
    <nav class="navbar navbar-light" style="background-color: #e3f2fd;">
    <div><div id="highlighter_621383" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help"></a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py plain">bob </code><code class="py keyword">=</code> <code class="py plain">Person.objects.get(</code><code class="py functions">id</code><code class="py keyword">=</code><code class="py value">2</code><code class="py plain">)</code></div><div class="line number2 index1 alt1"><code class="py plain">bob.name </code><code class="py keyword">=</code> <code class="py string">"Bobic"</code></div><div class="line number3 index2 alt2"><code class="py plain">bob.save(update_fields</code><code class="py keyword">=</code><code class="py plain">[</code><code class="py string">"name"</code><code class="py plain">])</code></div></div></td></tr></tbody></table></div></div>
    </nav>
    <p>Это позволит повысить производительность.</p>
    <h4>update()</h4>
    <p>Другой способ обновления объектов представляет метод <span class="b">update()</span> в сочетании с методом <span class="b">filter</span>, 
    которые вместе выполняют один запрос к базе данных:</p>
    <nav class="navbar navbar-light" style="background-color: #e3f2fd;">
    <div><div id="highlighter_414667" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help"></a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py plain">Person.objects.</code><code class="py functions">filter</code><code class="py plain">(</code><code class="py functions">id</code><code class="py keyword">=</code><code class="py value">2</code><code class="py plain">).update(name</code><code class="py keyword">=</code><code class="py string">"Mike"</code><code class="py plain">)</code></div></div></td></tr></tbody></table></div></div>
    </nav>
    <p>Если нам не надо получать обновляемый объект, то данный способ позволит нам увеличить производительность взаимодействия с бд.</p>
    <p>Иногда бывает необходимо изменить значение столбца в бд на основании уже имеющегося значения. В этом случае мы можем использовать функцию 
    <span class="b">F()</span>:</p>
    <nav class="navbar navbar-light" style="background-color: #e3f2fd;">
    <div><div id="highlighter_424069" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help"></a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py keyword">from</code> <code class="py plain">django.db.models </code><code class="py keyword">import</code> <code class="py plain">F</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="py plain">Person.objects.</code><code class="py functions">all</code><code class="py plain">(</code><code class="py functions">id</code><code class="py keyword">=</code><code class="py value">2</code><code class="py plain">).update(age </code><code class="py keyword">=</code> <code class="py plain">F(</code><code class="py string">"age"</code><code class="py plain">) </code><code class="py keyword">+</code> <code class="py value">1</code><code class="py plain">)</code></div></div></td></tr></tbody></table></div></div>
    </nav>
    <p>В данном случае полю age присваивается уже имеющееся значение, увеличенное на единицу.</p>
    <p>При этом важно учитывать, что метод update обновляет все записи в таблице, которые соответствуют условию.</p>
    <p>Если надо обновить вообще все записи, вне зависимости от условия, то необходимо комбинировать метод update с методом <code>all()</code>:</p>
    <nav class="navbar navbar-light" style="background-color: #e3f2fd;">
    <div><div id="highlighter_383575" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help"></a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py keyword">from</code> <code class="py plain">django.db.models </code><code class="py keyword">import</code> <code class="py plain">F</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="py plain">Person.objects.</code><code class="py functions">all</code><code class="py plain">().update(name</code><code class="py keyword">=</code><code class="py string">"Mike"</code><code class="py plain">)</code></div><div class="line number4 index3 alt1"><code class="py plain">Person.objects.</code><code class="py functions">all</code><code class="py plain">().update(age </code><code class="py keyword">=</code> <code class="py plain">F(</code><code class="py string">"age"</code><code class="py plain">) </code><code class="py keyword">+</code> <code class="py value">1</code><code class="py plain">)</code></div></div></td></tr></tbody></table></div></div>
    </nav>
    <h4>update_or_create()</h4>
    <p>Метод <span class="b">update_or_create</span> обновляет запись, а если ее нет, то добавляет ее в таблицу:</p>
    <nav class="navbar navbar-light" style="background-color: #e3f2fd;">
    <div><div id="highlighter_843068" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help"></a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py plain">values_for_update</code><code class="py keyword">=</code><code class="py plain">{</code><code class="py string">"name"</code><code class="py plain">:</code><code class="py string">"Bob"</code><code class="py plain">, </code><code class="py string">"age"</code><code class="py plain">: </code><code class="py value">31</code><code class="py plain">}</code></div><div class="line number2 index1 alt1"><code class="py plain">bob, created </code><code class="py keyword">=</code> <code class="py plain">Person.objects.update_or_create(</code><code class="py functions">id</code><code class="py keyword">=</code><code class="py value">2</code><code class="py plain">, defaults </code><code class="py keyword">=</code> <code class="py plain">values_for_update)</code></div></div></td></tr></tbody></table></div></div>
    </nav>
    <p>Метод <code>update_or_create()</code> принимает два параметра. Первый параметр представляет критерий выборки объектов, которые будут обновляться. 
    Второй параметр представляет объект со значениями, которые будут переданы записям, которые соответствуют китерию из первого параметра. 
    Если критерию не соответствует никаких записей, то в таблицу добавляется новый объект, а переменная created будет равна True.</p>
    <h3>Удаление</h3>
    <p>Для удаления мы можем вызвать метод <span class="b">delete()</span> у удаляемого объекта:</p>
    <nav class="navbar navbar-light" style="background-color: #e3f2fd;">
    <div><div id="highlighter_545089" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help"></a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py plain">person </code><code class="py keyword">=</code> <code class="py plain">Person.objects.get(</code><code class="py functions">id</code><code class="py keyword">=</code><code class="py value">2</code><code class="py plain">)</code></div><div class="line number2 index1 alt1"><code class="py plain">person.delete()</code></div></div></td></tr></tbody></table></div></div>
    </nav>
    <p>Если не требуется получение отдельного объекта из базы данных, тогда можно удалить объект с помощью комбинации методов <code>filter()</code> и <code>delete()</code>:</p>
    <nav class="navbar navbar-light" style="background-color: #e3f2fd;">
    <div><div id="highlighter_600801" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help"></a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py plain">Person.objects.</code><code class="py functions">filter</code><code class="py plain">(</code><code class="py functions">id</code><code class="py keyword">=</code><code class="py value">4</code><code class="py plain">).delete()</code></div></div></td></tr></tbody></table></div></div>
    </nav>
    <h3>Просмотр строки запроса</h3>
    <p>С помощью свойства <span class="b">query</span> у результата запроса мы можем получить SQL-запрос, который выполнялся. Например:</p>
    <nav class="navbar navbar-light" style="background-color: #e3f2fd;">
    <div><div id="highlighter_34314" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help"></a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py plain">people </code><code class="py keyword">=</code> <code class="py plain">Person.objects.</code><code class="py functions">filter</code><code class="py plain">(name</code><code class="py keyword">=</code><code class="py string">"Tom"</code><code class="py plain">).exclude(age</code><code class="py keyword">=</code><code class="py value">34</code><code class="py plain">)</code></div><div class="line number2 index1 alt1"><code class="py functions">print</code><code class="py plain">(people.query)</code></div></div></td></tr></tbody></table></div></div>
    </nav>
    <p>Данный код отобразит на консоли SQL-запрос типа следующего:</p>
    <nav class="navbar navbar-light" style="background-color: #e3f2fd;">
    <div><div id="highlighter_760188" class="syntaxhighlighter  sql"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help"></a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql keyword">SELECT</code> <code class="sql string">"firstapp_person"</code><code class="sql plain">.</code><code class="sql string">"id"</code><code class="sql plain">, </code><code class="sql string">"firstapp_person"</code><code class="sql plain">.</code><code class="sql string">"name"</code><code class="sql plain">, </code><code class="sql string">"firstapp_person"</code><code class="sql plain">.</code><code class="sql string">"age"</code></div><div class="line number2 index1 alt1"><code class="sql keyword">FROM</code> <code class="sql string">"firstapp_person"</code> <code class="sql keyword">WHERE</code> <code class="sql plain">(</code><code class="sql string">"firstapp_person"</code><code class="sql plain">.</code><code class="sql string">"name"</code> <code class="sql plain">= Tom </code><code class="sql color1">AND</code> <code class="sql color1">NOT</code> <code class="sql plain">(</code><code class="sql string">"firstapp_person"</code><code class="sql plain">.</code><code class="sql string">"age"</code> <code class="sql plain">= 34))</code></div></div></td></tr></tbody></table></div></div>
   </nav>

{% endblock %}